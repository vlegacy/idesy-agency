import"../styles/index.scss";import{gsap}from"gsap";import{ScrollTrigger}from"gsap/ScrollTrigger";import{ScrollToPlugin}from"gsap/ScrollToPlugin";gsap.registerPlugin(ScrollTrigger),gsap.registerPlugin(ScrollToPlugin);import marquee from"vanilla-marquee";import customSelect from"custom-select";const isTouchScreen=navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i),gsapMatchMedia=gsap.matchMedia();function animTitleRedLine(){const e=document.querySelectorAll(".js-anim-line");e.length&&e.forEach(((e,t)=>{gsap.set(e,{rotation:135,background:"#882929",scaleX:0,transformOrigin:"0% 0%"});const o=gsap.to(e,{scaleX:1,ease:"none",paused:!0});ScrollTrigger.create({trigger:e,animation:o,start:"center center",end:`center+=${e.dataset.srollerEnd||0} top`,once:!0,scrub:1})}))}function fixHeaderOnScroll(){let e=0;const t=document.querySelector(".header");t&&window.addEventListener("scroll",(()=>{!1===function(){let o=!1,r=window.scrollY;return r>e?(o=!0,t.classList.add("header-scrolling")):t.classList.remove("header-scrolling"),e=r,o}()?t.classList.add("fixed"):t.classList.remove("fixed")}))}function dropdown(){const e="show",t="lang-select";document.addEventListener("click",(function(o){let r=o.target.closest("."+t);!r&&o.target.classList.contains(t)?r=o.target:r&&r.classList.toggle(e),document.querySelectorAll("."+t+"."+e).forEach((t=>{r&&t===r||t.classList.remove(e)}))}))}function initModals(){const e=document.querySelectorAll("[toggle-modal]"),t=document.querySelectorAll(".modal .btn-close"),o=document.querySelector(".modal-overlay");e&&e.forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();const t=this.getAttribute("toggle-modal");document.querySelector(`#${t}`).classList.add("show"),document.body.classList.add("modal-open")}))})),t&&t.forEach((e=>{e.addEventListener("click",(function(t){t.preventDefault(),e.parentNode.parentNode.classList.remove("show"),document.body.classList.remove("modal-open")}))})),o&&o.addEventListener("click",(function(e){e.target==o&&(document.querySelector(".modal.show").classList.remove("show"),document.body.classList.remove("modal-open"))}))}function initSelect(){require("custom-select").default,customSelect("select")}function initSwiperMobileGallery(){const e=document.querySelector(".swiper-mobile-gallery");if(e&&window.innerWidth<992){console.log(Swiper),console.log(e),new Swiper(e,{spaceBetween:8,slidesPerView:"auto",loop:!0,centeredSlides:!0});const o=document.querySelector(".swiper-mobile-gallery .swiper-wrapper"),r=document.querySelectorAll(".swiper-mobile-gallery .swiper-slide");if(r.length>0)for(var t=0;t<3;t++){const e=r[t].cloneNode(!0);o.appendChild(e)}}}function videoPlayer(){const e=document.querySelectorAll(".video-holder");e&&e.length>0&&e.forEach((e=>{e.addEventListener("click",(()=>{e.classList.contains("playing")?(e.classList.remove("playing"),e.querySelector("video").pause()):(e.classList.add("playing"),e.querySelector("video").play())}))}))}function fullScreenMenu(){const e=document.querySelector(".header .btn-toggle-menu"),t=document.querySelector(".header .main-navigation"),o=t.querySelectorAll(".header .main-navigation li"),r=t.querySelectorAll(".langs-list");gsapMatchMedia.add("(max-width: 1200px)",(()=>{console.log("max-1200");const i=gsap.timeline({paused:!0});gsap.set(o,{y:30,opacity:0}),gsap.set(r,{y:30,opacity:0}),i.to(t,{duration:.8,opacity:1,height:"100%",ease:"expo.inOut"}),i.to(o,{y:0,opacity:1,stagger:.15,ease:"power4.out"}),i.to(r,{duration:.4,y:0,opacity:1,ease:"expo.inOut"},"-=.3"),i.reverse(),e.addEventListener("click",(t=>{t.preventDefault(),document.body.classList.contains("menu-opened")?(document.body.classList.remove("menu-opened"),e.classList.remove("open"),i.reversed(!i.reversed()),document.body.classList.remove("menu-opened")):(document.body.classList.add("menu-opened"),e.classList.add("open"),i.play(),document.body.classList.add("menu-opened"))}))}))}function initMarquee(){const e=document.querySelectorAll("[marquee]");e&&e.length>0&&e.forEach((e=>{new marquee(e,{duplicated:!0,direction:"left",speed:20,startVisible:!0,gap:0,delayBeforeStart:0})}))}function initAccordion(){var e=document.querySelectorAll("[accordion-item]"),t=document.querySelectorAll(".accordion-collapse");e.length>0&&e.forEach((o=>{o.querySelector(".accordion-header").addEventListener("click",(function(r){r.preventDefault(),o.classList.contains("open")?(o.classList.remove("open"),o.querySelector(".accordion-collapse").style.maxHeight=null):(function(e,t){for(const t of e)t.classList.remove("open")}(e),o.classList.add("open"),function(e){for(const t of e)t.style.maxHeight=null}(t),o.querySelector(".accordion-collapse").style.maxHeight=o.querySelector(".accordion-collapse").scrollHeight+"px")})),o.classList.contains("open")&&(o.querySelector(".accordion-collapse").style.maxHeight=o.querySelector(".accordion-collapse").scrollHeight+"px")}))}function gsapAnimations(){!function(){if(document.querySelector(".home-page")){const e=gsap.timeline({});e.from(".section_intro .h1",{y:40,ease:"power1.out",opacity:0,scale:.9,duration:2,stagger:.1}),e.from(".section_intro .chip",{duration:.8,y:20,opacity:0,autoAlpha:0,scale:0,stagger:.15},"-=1.2"),e.from(".section_intro .text-holder p",{duration:.5,y:30,opacity:0,autoAlpha:0,stagger:.15},"-=1.4"),e.from(".section_intro .title_img",{opacity:0,autoAlpha:0,duration:2},"-=1.5"),e.from("#svg",{opacity:0,autoAlpha:0,duration:2},"-=1.5");const t=gsap.timeline({ease:"power.in",scrollTrigger:{trigger:document.querySelector(".section_cooperate"),start:"top-=200 60%",end:"+=500"}});t.from(".section_cooperate .title-custom",{autoAlpha:0,y:50,opacity:0,duration:.55}),t.from(".section_cooperate .header-img",{autoAlpha:0,y:150,opacity:0,scale:.5,duration:.5},"-=.4"),t.from(".section_cooperate .header-text",{autoAlpha:0,y:50,opacity:0,duration:.55},"-=.9"),gsap.set(".section_cooperate .cooperate-card",{y:100,opacity:0}),ScrollTrigger.batch(".section_cooperate .cooperate-card",{start:"top 85%",once:!0,onEnter:e=>gsap.to(e,{duration:.4,opacity:1,y:0,stagger:.1,ease:"none"})});let o=gsap.utils.toArray(".works-card"),r=0,i=(ScrollTrigger.create({trigger:o[0],start:"center center"}),ScrollTrigger.create({trigger:o[o.length-1],start:"top top"}));gsapMatchMedia.add("(min-width: 992px)",(()=>{o.forEach(((e,t)=>{var n=1-.025*(o.length-t);let a=gsap.to(e,{scale:n,"transform-origin":'"50% '+(i.start+r)+'"'});ScrollTrigger.create({trigger:e,start:"top top+=160px",end:()=>i.start+r,pin:!0,pinSpacing:!1,ease:"none",animation:a,toggleActions:"restart none none reverse"})}))}));const n=gsap.timeline({scrollTrigger:{trigger:document.querySelector(".section_latest-works .title-custom"),start:"top-=150 60%",end:"+=500"}});n.from(".section_latest-works .title-custom",{duration:.5,y:50,opacity:0,autoAlpha:0}),n.from(".section_latest-works .cards-holder",{duration:.5,opacity:0,autoAlpha:0});const a=gsap.timeline({scrollTrigger:{trigger:document.querySelector(".section_pride"),start:"top bottom-=50%",end:"bottom 150%",scrub:4,markers:!0}});a.from(".section_pride .section-illustration",{ease:"power1.out",scale:0,duration:1.1});const c=document.querySelector("circle"),s=c.r.baseVal.value,l=2*Math.PI*s;gsap.set(c,{strokeDasharray:l,strokeDashoffset:l}),a.to(c,{strokeDashoffset:0,ease:"none",duration:1.1},"-=1"),gsap.utils.toArray(".section_pride .text-holder p").forEach((e=>{gsap.fromTo(e,{backgroundSize:"0% 100%"},{backgroundSize:"100% 100%",scrollTrigger:{trigger:".section_pride",start:"top-=30% top",end:"40% center",scrub:3},duration:1,ease:"none"})})),gsap.from(".section_pride .video-holder",{opacity:0,scale:0,duration:.5,autoAlpha:0,scrollTrigger:{start:"center+=100 bottom",trigger:document.querySelector(".section_pride .video-holder")}}),gsap.set(".section_pride .img-holder",{y:100,opacity:0}),ScrollTrigger.batch(".section_pride .img-holder",{onEnter:e=>gsap.to(e,{delay:.1,autoAlpha:1,y:0,opacity:1,stagger:.3,duration:.6}),scrollTrigger:{start:"top 20%",trigger:document.querySelector(".section_pride")}}),gsap.timeline({scrollTrigger:{trigger:document.querySelector(".section_result"),start:"top 60%",end:"+=500"}}).from(".section_result .title-custom",{autoAlpha:0,y:50,opacity:0,duration:.55}),gsap.from(".section_result .list-title",{autoAlpha:0,y:50,opacity:0,duration:.55,stagger:.5,scrollTrigger:{start:"top 60%",trigger:document.querySelector(".section_result")}}),gsap.set(".section_result .list-result li",{y:100,opacity:0}),ScrollTrigger.batch(".section_result .list-result li",{onEnter:e=>gsap.to(e,{ease:"power1.in",duration:.4,opacity:1,autoAlpha:1,y:0,stagger:.1,ease:"none"}),scrollTrigger:{start:"top 75%",once:!0}}),gsap.timeline({scrollTrigger:{trigger:document.querySelector(".section_result"),start:"top 10%"}}).from(".section_answer .title-custom",{autoAlpha:0,y:50,opacity:0,duration:.55}).from(".section_answer .accordion",{autoAlpha:0,y:50,opacity:0,duration:.3,stagger:.05}),!isTouchScreen&&document.querySelector(".title-wrapper")&&document.body.addEventListener("mousemove",(e=>{gsap.to(document.querySelector(".home-page .section_intro .decor-title"),{x:1*e.clientX/window.innerWidth+"%",y:1.5*e.clientY/window.innerHeight+"%",duration:.25}),gsap.to(document.querySelector(".section_intro .decor-title .chip-1"),{x:5*e.clientX/window.innerWidth+"%",y:8*e.clientY/window.innerHeight+"%",duration:.25}),gsap.to(document.querySelector(".section_intro .decor-title .chip-2"),{x:5*e.clientX/window.innerWidth+"%",y:8*e.clientY/window.innerHeight+"%",duration:.25})}))}}(),function(){const e=gsap.timeline({scrollTrigger:{trigger:".footer",start:"top bottom-=200",end:"bottom center",onEnter:()=>e.play()}});e.from(".footer-block",{ease:"line",delay:.5,opacity:0,scale:.97,duration:.6,stagger:.2},"-=.2").from(".footer_decor_circle",{ease:"line",opacity:0,scale:0,duration:.4},"-=.4")}()}document.addEventListener("DOMContentLoaded",(()=>{fullScreenMenu(),initMarquee(),initAccordion(),videoPlayer(),initSwiperMobileGallery(),initSelect(),initModals(),gsapAnimations(),dropdown(),fixHeaderOnScroll(),animTitleRedLine(),console.log("content loaded")})),window.addEventListener("resize",(()=>{}));